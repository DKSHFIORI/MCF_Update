sap.ui.define(["sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/ui/core/Core","sap/m/BusyDialog"],(function(e,t,a,s,i){"use strict";return{onInit:function(){this._oBusyDialog=new i,this._MessageManager=s.getMessageManager()},onSelectedChangeType:function(e){let t=e.getParameter("value"),a=this.byId("dksh.ymm.mcfupdate.mcfupdate::sap.suite.ui.generic.template.ObjectPage.view.Details::YMM_C_MCF_UPDATE--idChangePanel::Section"),s=this.byId("dksh.ymm.mcfupdate.mcfupdate::sap.suite.ui.generic.template.ObjectPage.view.Details::YMM_C_MCF_UPDATE--idCCDChangePanel::Section");"Finance Related"==t?(a.setVisible(!0),s.setVisible(!1)):(a.setVisible(!1),s.setVisible(!0))},onSelectedCountryType:function(e){},beforeSaveExtension:function(){},onExit:function(){},onAfterRendering:function(){var e=this;let t=this.byId("dksh.ymm.mcfupdate.mcfupdate::sap.suite.ui.generic.template.ObjectPage.view.Details::YMM_C_MCF_UPDATE--idMaterialInput::Country::Field");sap.ui.getCore().byId("dksh.ymm.mcfupdate.mcfupdate::sap.suite.ui.generic.template.ObjectPage.view.Details::YMM_C_MCF_UPDATE--idMaterialInput::ChangeType::Field").attachChange(e.onSelectedChangeType,e),t.attachChange(e.onSelectedCountryType,e),this.byId("dksh.ymm.mcfupdate.mcfupdate::sap.suite.ui.generic.template.ObjectPage.view.Details::YMM_C_MCF_UPDATE--idChangePanel::Section").setVisible(!1),this.byId("dksh.ymm.mcfupdate.mcfupdate::sap.suite.ui.generic.template.ObjectPage.view.Details::YMM_C_MCF_UPDATE--idCCDChangePanel::Section").setVisible(!1)},handleUploadPress:function(e){let t=this.byId("idFileUploader");if(!t.getValue())return void sap.m.MessageBox.error("Please select a file to upload.");this.csrfToken=this.getView().getModel().getSecurityToken(),t.setSendXHR(!0);let a=new sap.ui.unified.FileUploaderParameter;a.setName("x-csrf-token"),a.setValue(this.csrfToken);let s=new sap.ui.unified.FileUploaderParameter;s.setName("slug"),s.setValue(t.getValue()),this._oBusyDialog.setText("Uploading..."),this._oBusyDialog.open(),t.checkFileReadable().then((function(){t.addHeaderParameter(a),t.addHeaderParameter(s),t.addHeaderParameter(oHeaderParamContent),t.upload(),t.destroyHeaderParameters()}),(function(e){MessageBox.error("The file cannot be read. It may have changed."),this._oBusyDialog.close()})).then((function(e){t.clear()}))},extractErrorMessage:function(e){return(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("errordetail")},handleUploadComplete:function(e){let t=e.mParameters.responseRaw,a=this.extractErrorMessage(t);if(a.length>0)for(var s=0;s<a.length;s++){let e,t=a[s].getElementsByTagName("message"),i=a[s].getElementsByTagName("severity");if("Exception raised without specific error"!==t[0].textContent)switch(i[0].textContent){case"error":e=MessageType.Error;break;case"success":e=MessageType.Warning;break;case"info":e=MessageType.Information;break;default:e=MessageType.None}}else MessageBox.success("Successfully Uploaded");this.getOwnerComponent().getModel().refresh(!0),this._oBusyDialog.close()},handleCancelPress:function(e){},onSaveDraft:function(){console.log("Save as draft!")}}}));